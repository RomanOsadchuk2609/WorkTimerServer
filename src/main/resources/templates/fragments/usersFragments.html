<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">

<div id="foundUsersDiv" th:fragment="foundUsers">
    <!--/*@thymesVar id="foundUsers" type="List<com.osadchuk.worktimerserver.model.dto.UserDTO>"*/-->
    <table class="table table-striped" th:if="${foundUsers != null && !foundUsers.isEmpty()}">
        <thead class="bg-dark-green" style="color: white">
        <tr>
            <th scope="col">Username</th>
            <th scope="col">First name</th>
            <th scope="col">Last name</th>
            <th scope="col">Phone</th>
            <th scope="col">Admin</th>
            <th scope="col">Enable</th>
            <th scope="col">Token</th>
            <th scope="col">Action</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="foundUser:${foundUsers}">
            <td th:text="${foundUser.username}"></td>
            <td th:text="${foundUser.firstName}"></td>
            <td th:text="${foundUser.lastName}"></td>
            <td th:text="${foundUser.phoneNumber}"></td>
            <td th:text="${foundUser.admin}"></td>
            <td th:text="${foundUser.enable}"></td>
            <td th:text="${foundUser.token}"></td>
            <td>
                <svg th:attr="username = ${foundUser.username}" class="bi bi-envelope" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" color="green"
                     xmlns="http://www.w3.org/2000/svg" data-toggle="tooltip" th:title="'Send SMS with token'">
                    <path fill-rule="evenodd"
                          d="M14 3H2a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1zM2 2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H2z"/>
                    <path d="M.05 3.555C.017 3.698 0 3.847 0 4v.697l5.803 3.546L0 11.801V12c0 .306.069.596.192.856l6.57-4.027L8 9.586l1.239-.757 6.57 4.027c.122-.26.191-.55.191-.856v-.2l-5.803-3.557L16 4.697V4c0-.153-.017-.302-.05-.445L8 8.414.05 3.555z"/>
                </svg>
                <svg sec:authorize="hasAuthority('APP_ADMIN')" th:attr="username = ${foundUser.username}"
                     th:if="${!user.username.equals(foundUser.username) and foundUser.admin and foundUser.enable}" class="bi bi-star-fill" width="1em" height="1em"
                     viewBox="0 0 16 16" fill="currentColor" color="orange" xmlns="http://www.w3.org/2000/svg" data-toggle="tooltip"
                     th:title="'Remove ADMIN authorities'">
                    <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.283.95l-3.523 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
                </svg>
                <svg sec:authorize="hasAuthority('APP_ADMIN')" th:attr="username = ${foundUser.username}"
                     th:if="${!user.username.equals(foundUser.username) and !foundUser.admin and foundUser.enable}" class="bi bi-star" width="1em" height="1em"
                     viewBox="0 0 16 16" fill="currentColor" color="orange" xmlns="http://www.w3.org/2000/svg" data-toggle="tooltip" th:title="'Grant ADMIN authorities'">
                    <path fill-rule="evenodd"
                          d="M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.523-3.356c.329-.314.158-.888-.283-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767l-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288l1.847-3.658 1.846 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.564.564 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"/>
                </svg>
                <svg th:attr="username = ${foundUser.username}" th:if="${!user.username.equals(foundUser.username) and foundUser.enable and !foundUser.admin}"
                     class="bi bi-x-octagon" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" color="red" xmlns="http://www.w3.org/2000/svg"
                     data-toggle="tooltip" th:title="'Disable user'">
                    <path fill-rule="evenodd"
                          d="M4.54.146A.5.5 0 0 1 4.893 0h6.214a.5.5 0 0 1 .353.146l4.394 4.394a.5.5 0 0 1 .146.353v6.214a.5.5 0 0 1-.146.353l-4.394 4.394a.5.5 0 0 1-.353.146H4.893a.5.5 0 0 1-.353-.146L.146 11.46A.5.5 0 0 1 0 11.107V4.893a.5.5 0 0 1 .146-.353L4.54.146zM5.1 1L1 5.1v5.8L5.1 15h5.8l4.1-4.1V5.1L10.9 1H5.1z"/>
                    <path fill-rule="evenodd" d="M11.854 4.146a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708-.708l7-7a.5.5 0 0 1 .708 0z"/>
                    <path fill-rule="evenodd" d="M4.146 4.146a.5.5 0 0 0 0 .708l7 7a.5.5 0 0 0 .708-.708l-7-7a.5.5 0 0 0-.708 0z"/>
                </svg>
                <svg th:attr="username = ${foundUser.username}" th:if="${!user.username.equals(foundUser.username) and !foundUser.enable and !foundUser.admin}"
                     class="bi bi-x-octagon-fill" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" color="red" xmlns="http://www.w3.org/2000/svg"
                     data-toggle="tooltip" th:title="'Enable user'">
                    <path fill-rule="evenodd"
                          d="M11.46.146A.5.5 0 0 0 11.107 0H4.893a.5.5 0 0 0-.353.146L.146 4.54A.5.5 0 0 0 0 4.893v6.214a.5.5 0 0 0 .146.353l4.394 4.394a.5.5 0 0 0 .353.146h6.214a.5.5 0 0 0 .353-.146l4.394-4.394a.5.5 0 0 0 .146-.353V4.893a.5.5 0 0 0-.146-.353L11.46.146zm.394 4.708a.5.5 0 0 0-.708-.708L8 7.293 4.854 4.146a.5.5 0 1 0-.708.708L7.293 8l-3.147 3.146a.5.5 0 0 0 .708.708L8 8.707l3.146 3.147a.5.5 0 0 0 .708-.708L8.707 8l3.147-3.146z"/>
                </svg>
                <svg th:attr="username = ${foundUser.username}" th:if="${!user.username.equals(foundUser.username) and !foundUser.admin}" class="bi bi-trash" width="1em"
                     height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg" data-toggle="tooltip" th:title="'Remove user'">
                    <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"/>
                    <path fill-rule="evenodd"
                          d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4L4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"/>
                </svg>
            </td>
        </tr>
        </tbody>
    </table>
    <div th:if="${foundUsers == null || foundUsers.isEmpty()}" class="alert alert-danger" role="alert" th:text="'Could not find any user.'"></div>
</div>

<div id="addUserDiv" th:fragment="addUser">
    <!--/*@thymesVar id="user" type="com.osadchuk.worktimerserver.model.NewUser"*/-->
    <h3 th:text="'Add User'"></h3>
    <form align="left" action="/users/add" th:object="${newUser}" th:name="newUser" method="POST">
        <fieldset>
            <div th:if="${successMessage}" class="alert alert-success" role="alert"
                 th:text="${successMessage}"></div>

            <div th:if="${errorMessage}" class="alert alert-danger" role="alert"
                 th:text="${errorMessage}"></div>

            <div class="form-group">
                <label for="username">Username</label>
                <input id="username" type="text" class="form-control input-lg" th:field="*{username}"
                       placeholder="username" required="required"/>
                <p th:each="error: ${#fields.errors('username')}"
                   th:text="${error}">Validation error</p>
            </div>

            <div class="form-group">
                <label for="firstName">First Name</label>
                <input id="firstName" type="text" class="form-control input-lg" th:field="*{firstName}"
                       placeholder="First Name" required="required"/>
                <p th:each="error: ${#fields.errors('firstName')}"
                   th:text="${error}">Validation error</p>
            </div>
            <div class="form-group">
                <label for="lastName">Last Name</label>
                <input id="lastName" type="text" class="form-control input-lg" th:field="*{lastName}"
                       placeholder="Last Name" required="required"/>
                <p th:each="error: ${#fields.errors('lastName')}"
                   th:text="${error}">Validation error</p>
            </div>
            <div class="form-group">
                <label for="phoneNumber">Phone Number</label>
                <input id="phoneNumber" type="text" class="form-control input-lg" th:field="*{phoneNumber}"
                       placeholder="Phone Number" required="required"/>
                <p th:each="error: ${#fields.errors('phoneNumber')}"
                   th:text="${error}">Validation error</p>
            </div>
            <div class="form-check">
                <input id="isAdmin" type="checkbox" class="form-check-input" th:field="*{admin}"/>
                <label class="form-check-label" for="isAdmin">Is Admin</label>
            </div>

            <div class="form-group">
                <input type="submit" class="btn btn-lg btn-success btn-block" value="Add"/>
                <input type="reset" class="btn btn-lg btn-outline-secondary btn-block" value="Cancel"/>
            </div>
        </fieldset>
    </form>
</div>